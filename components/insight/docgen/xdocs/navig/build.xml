<?xml version="1.0" encoding="UTF-8"?>

<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
 * Build file for the XDoc HTML Navigation Menu applet.
 * You can use this file to compile and package the applet.  Please refer to 
 * the usage target for further details.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
<project name="XDoc HTML Navigation Menu" default="usage" basedir=".">

  <description>The XDoc HTML Navigation Menu.</description> 
 
  <!-- The root of the source files. --> 
  <property name="src.dir" location="SRC" /> 
 
  <!-- All souce files. -->  
  <patternset id="sources">
    <include name="**/*.java"/>
  </patternset>
  
  <!-- All resouce files. --> 
  <fileset id="resources" dir="${src.dir}" excludes="**/*.java"/> 
  
  <!-- The build directory.  Every target (except 'jar') outputs below this 
       directory. -->  
  <property name="build.dir" location="OUT" />
   
  <!-- The compilation output directory. --> 
  <property name="compiled.dir" location="${build.dir}/compiled" />
 
  <!-- The jar file which is output under the base directory. --> 
  <property name="jar.file" location="nav-menu.jar" /> 
  
 
 
  
  <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
   * Creates the build directory structure and copies all needed resources.
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
  <target name="init"> 
    <mkdir dir="${build.dir}" /> 
    <mkdir dir="${compiled.dir}" /> 
    <copy todir="${compiled.dir}">
      <fileset refid="resources" />
    </copy> 
  </target>
  
  <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
   * Compile the applet sources into ${compiled.dir}.
   * The app sources is the set of all files within ${src.dir} matching the
   * sources pattern.
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~--> 
  <target name="compile" 
          depends="init" 
          description="Compile the applet.">
    <javac srcdir="${src.dir}"
           destdir="${compiled.dir}"
           includeantruntime="no"
           encoding="UTF-8"
           deprecation="yes"
           debug="yes"
           debuglevel="lines,vars,source">
      <patternset refid="sources" />
    </javac> 
  </target> 
  
  <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
   * Package the applet into the ${jar.file} under the base directory.
   * The whole content of the ${compiled.dir} is jar'ed.
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
  <target name="jar" 
          depends="clean,compile"
          description="Package the applet.">     
    <jar destfile="${jar.file}">
      <fileset dir="${compiled.dir}" />
      <manifest>
        <attribute name="Created-By" value="OME Development Team" />
      </manifest> 
    </jar>
  </target>
 
  <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
   * Removes all output generated by the targets within this file. 
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~--> 
  <target name="clean"
          description="Remove all output generated by the last build." >
    <delete dir="${build.dir}" /> 
    <delete file="${jar.file}" /> 
  </target> 
  
  <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
   * Output a list of available targets.
   * This is the list of all public targets exported by this file.
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~--> 
  <target name="usage"
          description="List available targets.">
    <echo level="info">
Available targets:
------------------ 
  compile: Compiles the applet under ${compiled.dir}.
  jar: Packages the applet into the ${jar.file}.
  clean: Removes all output generated by the last build.
    </echo> 
  </target>
  
</project> 