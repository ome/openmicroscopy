<html>
<head>
  <title>Build Tool</title>
</head>
<body>
<p>The build tool is a Java program that invokes Ant to process the master build file. 
  Its purpose is to run a build without requiring Ant to be installed and configured. 
  It's composed of just one source file -- <i>build.java</i>, which is located in 
  the <i>build/tools</i> directory. The build tool loads the Ant core and all the 
  other libraries dynamically from the <i>tools</i> directory, prepares a suitable 
  environment, and then invokes Ant with whatever arguments were supplied on the command 
  line.</p>
<p>Besides the external libraries discussed in the previous sections, the <i>tools</i> 
  directory also contains the Ant core jars and the Ant jars for the optional tasks 
  that we use. So the command <code>java build</code> will result in invoking Ant 
  with whatever arguments follow <code>build</code> on the command line and with a 
  classpath set to contain all the jar files under <i>build/tools</i>. Because the 
  classpath contains all Ant core and optional libraries and all the external libraries, 
  all that is effectively needed to run a build is a JDK -- as opposite to a whole 
  Ant installation with all external libraries.</p>
<div class="noteFrame">
  <div class="noteLabel">Note</div>
  <div class="noteContent">
    <p>Default compilation tasks in Ant require the <i>Sun</i> JDK tools. Those ship 
      with Sun JDKs and are contained in the <i>lib/tools.jar</i>. If you have a JDK 
      from another vendor (or just a plain JRE), the Sun JDK tools might not be available, 
      in which case compilation of Shoola would fail. To fix this, proceed as follows:</p>
	<ul>
      <li>Make sure the Sun JDK tools are not available to the JVM you will use to 
        invoke the Build Tool. Just run <code>Java build compile</code>; if it fails 
        the Sun JDK tools are not available.</li>
      <li>Download the Sun JDK tools jar file into <i>build/tools</i>/. Make sure 
        the version of the JDK tools is the same as the one of the JVM that you will 
        use to invoke the build tool. (Failure to comply may result in compilation 
        errors due to class file version incompatibilities.)</li>
    </ul>
    <p>It's important to verify that the JDK tools are not available before dropping 
      another copy into our <i>tools</i> directory. In fact, if the JDK tools are 
      already available, adding a copy under <i>tools</i> would result in having two 
      sets of JDK tools classes on the classpath. As you can imagine, some nasty runtime 
      behavior could originate from that if the JDK tools have different versions.</p>
  </div>
</div>
<p>The <code>build</code> class file is generated by an Ant build file: the <i>build.xml</i> 
  file under the <i>build/tools</i> directory. You can refer to the inline documentation 
  in this file for further details on the build tool. Also the <i>build.java</i> source 
  file is thoroughly documented if you need to explore the implementation details.</p>
<p>&#160;</p>
<div class="noteFrame">
  <div class="noteLabel">Note</div>
  <div class="noteContent">The <i>tools</i> directory also contains two XSL files. 
    These are the stylesheets used by the <code>junitreport</code> task to make test 
    reports. The reason why we're not using the embedded files that come with the 
    task is that the Xalan <code>redirect</code> declared in these files doesn't work 
    with some (nasty) configurations of JRE/Xalan. So we stripped those files out 
    and changed the <code>redirect</code> statement.</div>
</div>
</body>
</html>

